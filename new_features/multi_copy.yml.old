
---
- name: Checking the foldrt status for multiple servers
  hosts: ubuntu
  become: yes
  vars:
   server:
    - 192.168.55.82
    - 192.168.55.48
  tasks:
   - name: Checking status of folder in {{inventory_hostname}}
     stat:
      path: /tmp/copy/
     register: st
   - name: Create folder if it's not existed
     copy:
      src: server.xml
      dest: /tmp/copy/
     when: ( st.stat.exists is succeeded ) and ( inventory_hostname in server)
     with_items:
      - "{{st.stat.exists}}"
   - name: output the results
     debug:
      msg: "{{st.stat}}" 
     with_items: 
      - "{{st.stat.exists}}"
